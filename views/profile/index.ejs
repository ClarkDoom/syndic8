<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<div class="container">
  <div class="row">
    <div class="col text-center">
      <h1><b>Profile</b></h1>
      <a href="/profile/<%= user.profile._id %>/edit">Edit Profile</a>
      <h3>@<%= profile.userName %> </h1>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col text-center">
      <h5>About Me:</h5>
      <p><i><%= profile.aboutMe %></i></p>
    </div>
  </div>
</div>
  
<div class="container">
  <div class="row">
    <div class="col text-center">
      <h3>Favorites</h3>
    </div>
  </div>
</div>


<div class="container">
  <div class="row">
    <% shows.forEach(show => { %>
      <% if (show.showType === "favorite") { %>
        <div class="col text-center">
          <div class="card" style="width: 12rem;">
            <img src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" class="card-img-top" alt="">
            <div class="card-body">
              <h5 class="card-title"><%= show.name %></h3>
              <% if (show.addedBy.equals(user.profile._id)) { %>
                <form action="/shows/<%= show._id %>?_method=DELETE" method="POST">
                  <button>Remove</button>
                </form>
              <% } %> 
            </div>
          </div>
        </div>
      <% } %> 
    <% }) %>
  </div>
</div>


<h3>Currently Watching</h3>
<ul>
  <% shows.forEach(show => { %>
    <% if (show.showType === "currently-watching") { %> 
      <h3><%= show.name %></h3>
      <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt="">
      <br>
      <%= show.description %>
      <br>
      <br>
    <% } %> 
  <% }) %>  
</ul>

<h3>Latest Reviews</h3>

<ul>
  <% shows.forEach(show => { %>
    <% if (show.showType === "seen-it" && show.reviews.length ) { %> 
      <h3><%= show.name %></h3>
      <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt=""><br>
      <% show.reviews.forEach(review => { %>
        Review Title: 
        <%= review.reviewTitle %> 
        <br>
        Review:
        <%= review.reviewContent %>
        <br>
        Rating: 
        <%= review.rating %>
        <br>
        <a href="/shows/<%= show._id %>/<%=review._id  %>">Go To Review</a>
        <br> 
      <% }) %>
      <br>
      <br>
    <% } %> 
  <% }) %>  
</ul>




<%- include('../partials/footer') %>
