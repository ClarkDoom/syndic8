<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<div class="container">
  <div class="row">
    <div class="col text-center">
      <h1>Profile</h1>
    </div>
  </div>
</div>


<a href="/profile/<%= user.profile._id %>/edit">Edit Profile</a>
<br><br>


  <!-- placeholder - needs to pull username from profile of user logged in  -->
  <h3>@username: <%= profile.userName %> </h1>
  About Me:<br>
  <p><%= profile.aboutMe %></p>


  <h3>Favorites</h3>
  <ul>
    <% shows.forEach(show => { %>
      <% if (show.showType === "favorite") { %> 
        <h3><%= show.name %></h3>
        <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt="">
        <br>
        <%= show.description %>
        <br>
        <% if (show.addedBy.equals(user.profile._id)) { %>
          <form action="/shows/<%= show._id %>?_method=DELETE" method="POST">
            <button>Remove</button>
          </form>
        <% } %> 
        <br>
      <% } %> 
    <% }) %>  
  </ul>


<h3>Currently Watching</h3>
<ul>
  <% shows.forEach(show => { %>
    <% if (show.showType === "currently-watching") { %> 
      <h3><%= show.name %></h3>
      <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt="">
      <br>
      <%= show.description %>
      <br>
      <br>
    <% } %> 
  <% }) %>  
</ul>

<h3>Latest Reviews</h3>

<ul>
  <% shows.forEach(show => { %>
    <% if (show.showType === "seen-it" && show.reviews.length ) { %> 
      <h3><%= show.name %></h3>
      <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt=""><br>
      <% show.reviews.forEach(review => { %>
        Review Title: 
        <%= review.reviewTitle %> 
        <br>
        Review:
        <%= review.reviewContent %>
        <br>
        Rating: 
        <%= review.rating %>
        <br>
        <a href="/shows/<%= show._id %>/<%=review._id  %>">Go To Review</a>
        <br> 
      <% }) %>
      <br>
      <br>
    <% } %> 
  <% }) %>  
</ul>




<%- include('../partials/footer') %>
