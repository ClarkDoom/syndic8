<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<h1>Profile</h1>

<a href="/profile/<%= user.profile._id %>/edit">Edit Profile</a>
<br><br>

<% if (user?.profile.avatar) { %>
  <div>
    <img
    src="<%= user.profile.avatar %>"
    alt="<%= user.profile.name %> avatar"
    />
  </div>
  <% } %>

  <!-- placeholder - needs to pull username from profile of user logged in  -->
  <h3>@username: <%= profile.userName %> </h1>
  About Me:<br>
  <p><%= profile.aboutMe %></p>


  <h3>Top 8</h3>
  <ul>
    <% shows.forEach(show => { %>
      <% if (show.showType === "top8") { %> 
        <h3><a href="/shows/<%= show._id %>"><%= show.name %></a></h3>
        <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt="">
        <br>
        <%= show.description %>
        <br>
        <br>
      <% } %> 
    <% }) %>  
  </ul>


<h3>Currently Watching</h3>
<ul>
  <% shows.forEach(show => { %>
    <% if (show.showType === "currently-watching") { %> 
      <h3><a href="/shows/<%= show._id %>"><%= show.name %></a></h3>
      <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt="">
      <br>
      <%= show.description %>
      <br>
      <br>
    <% } %> 
  <% }) %>  
</ul>

<h3>Latest Reviews</h3>

<ul>
  <% shows.forEach(show => { %>
    <% if (show.showType === "seen-it") { %> 
      <h3><a href="/shows/<%= show._id %>"><%= show.name %></a></h3>
      <img width=10%" src="https://www.themoviedb.org/t/p/w300_and_h450_bestv2/<%= show.imageUrl %>" alt=""><br>
      <% show.reviews.forEach(review => { %>
        Review Title: 
        <%= review.reviewTitle %> 
        <br>
        Review:
        <%= review.reviewContent %>
        <br>
        Rating: 
        <%= review.rating %> 
      <% }) %>
      <br>
      <br>
    <% } %> 
  <% }) %>  
</ul>




<%- include('../partials/footer') %>
